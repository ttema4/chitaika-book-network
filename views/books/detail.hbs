<!DOCTYPE html>
<html lang="ru">
{{> header title=book.title metaTitle=book.title}}
    <section class="section">
      <div class="book-detail-container">
        
        <div class="book-detail-cover">
            <figure class="figure book-detail-figure">
            {{#if book.cover_url}}
                <img class="book-detail-img" 
                     src="{{book.cover_url}}" 
                     alt="Обложка книги «{{book.title}}»" 
                     loading="eager"
                     onerror="if(!this.dataset.retried){this.dataset.retried=true; this.src=this.src+'?t='+Date.now();}else{this.src='https://storage.yandexcloud.net/book-network/images/cover.png'; this.onerror=null;}">
            {{else}}
                <img class="book-detail-img" src="https://storage.yandexcloud.net/book-network/images/cover.png" alt="Обложка по умолчанию" style="background: #eee;">
            {{/if}}
            </figure>
        </div>

        
        <div class="book-detail-info">
            <div>
                <h2 class="section__title book-detail-title">{{book.title}}</h2>
                <p class="card__meta book-detail-author">Автор: {{book.author}}</p>
                {{#if book.genre}}
                <p class="card__meta book-detail-genre">Жанр: {{book.genre}}</p>
                {{/if}}
            </div>

            {{#if book.description}}
            <div class="book-description">
                <h3 class="book-description-title">Описание</h3>
                <p class="book-description-text">{{book.description}}</p>
            </div>
            {{/if}}

            <div class="book-actions">
                <a class="btn btn-primary book-action-read" href="{{book.text_url}}" target="_blank">Читать / Скачать текст</a>
                
                <div class="btn-group book-action-row">
                    <a href="/books/{{book.id}}/edit" class="btn btn-secondary btn-sm book-action-edit">Редактировать</a>
                    
                    <form action="/books/{{book.id}}?_method=DELETE" method="POST" onsubmit="return confirm('Вы уверены, что хотите удалить книгу?');" class="book-action-delete">
                        <button type="submit" class="btn btn-danger btn-sm book-action-delete-btn">Удалить</button>
                    </form>
                </div>
            </div>
        </div>
      </div>
    </section>
{{> footer}}
</html>
